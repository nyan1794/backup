import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/MySQLServlet")
public class MySQLServlet extends HttpServlet(){
		MySQLServlet(){
			super();
		}
	protected void doGet(HttpServletRequest req,HttpServletResponse res)throws ServletException IOException{
			req.setCharacterEncoding("UTF-8");
			res.setContentType("text/html;charset=UTF-8");

			PrintWriter out=res.getWriter();
			out.println("<html>");
			out.println("<head>");
			out.println("<title>データベーステスト</title>");
			out.println("</head>");
			out.println("<body>");

			Connection conn=null;
			String url="jdbc:mysql://localhost/testdb";
			String user="root";
			String password="mysql";
			try{
				Class.forName("com.mysql.jdbc.Driver").newInstance();
				conn=DriverManager.getConnection(url,user,password);

				Statement stmt =conn.createStatement();
				String sql="SELECT * FROM test_table";
				ResultSet rs =stmt.executeQuary(sql);

				while(rs.next()){
					int userId=rs.getInt("user_id");
					String userName=rs.getString("user_name");
					String userPassword=rs.getString("password");
					out.println("<p>");
					out.println("ユーザーId:"+userId+"、ユーザー名:"+userName+"、パスワード"+userPassword);
				}
			}
	}
}