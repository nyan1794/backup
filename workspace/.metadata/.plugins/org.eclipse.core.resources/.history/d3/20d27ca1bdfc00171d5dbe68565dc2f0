package com.internousdev.ecsite.action;

import java.util.Map;

import org.apache.struts2.interceptor.SessionAware;

import com.internousdev.ecsite.dao.ShopLoginDAO;
import com.internousdev.ecsite.dto.ShopLoginDTO;
import com.opensymphony.xwork2.ActionSupport;

public class ShopLoginAction extends ActionSupport implements SessionAware{
	private String shopLoginId;
	private String shopLoginPassword;
	private String Massage="ログインに失敗しました。";
	public Map<String,Object> session;

	private ShopLoginDAO shopLoginDAO=new ShopLoginDAO();

	public String execute(){
	String result=ERROR;

	ShopLoginDTO shopLoginDTO=shopLoginDAO.shopLoginSQL(shopLoginId,shopLoginPassword);
	if(!(shopLoginDTO.getShopLoginFlg())){
		result =ERROR;
	}else if(shopLoginDTO.getShopLoginFlg()){
		session.put("shopLoginId",shopLoginDTO.getShopLoginId());
		session.put("shopLoginPass",shopLoginDTO.getShopLoginPassword());


		result=SUCCESS;
		setMassage(null);
	}
	return result;
	}

	public String getShopLoginId() {
		return shopLoginId;
	}
	public void setShopLoginId(String shopLoginId) {
		this.shopLoginId = shopLoginId;
	}

	public String getShopLoginPassword() {
		return shopLoginPassword;
	}
	public void setShopLoginPassword(String shopLoginPassword) {
		this.shopLoginPassword = shopLoginPassword;
	}

	@Override
	public void setSession(Map<String,Object> session){
		this.session=session;
	}

	public String getMassage() {
		return Massage;
	}
	public void setMassage(String massage) {
		Massage = massage;
	}

}
